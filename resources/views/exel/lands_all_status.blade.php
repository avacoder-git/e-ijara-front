<table border="1">
    <tr></tr>
    <tr>
        <td colspan="24">{{\Carbon\Carbon::now()->format('d.m.Y')}} йил ҳолатига</td>
    </tr>
    <tr>
        <td rowspan="2" colspan="24">"E-Ijara" ахборот тизими жараёнлари юзасидан <br>
            ҲИСОБОТ"
        </td>
    </tr>
</table>
<table style="border: 1px solid #000000">
    <tr>
        <td rowspan="4">Ҳудудлар</td>
        <td rowspan="2" colspan="4">"Кадастрлар палатасидан <br>
            киритилган бўш ер участкалари"
        </td>
        <td rowspan="2" colspan="4">
            "Ўздаверлойиҳа" институти <br>
            томонидан тайёрланган лотлар"
        </td>
        <td colspan="12">
            Идоравий келишув
        </td>
        <td rowspan="2" colspan="4">
            "Туман хокимлиги <br>
            томонидан тасдиқланган"
        </td>
        <td colspan="8">
            «E-AUKSION»
        </td>
        <td colspan="8">
            «E-QAROR»
        </td>
        <td colspan="8">
            Кадастр палатаси
        </td>
    </tr>
    <tr>
        <td colspan="4">Давлат кадастрлари палатаси ҳудудий бошқармалари</td>
        <td colspan="4">Сув хўжалиги бошқармаси</td>
        <td colspan="4">Қишлоқ хўжалаги бошқармаси</td>
        <td colspan="4">савдо майдончасига қўйилган</td>
        <td colspan="4">танлов ғолиби аниқланган</td>
        <td colspan="4">Тизимга жўнатилган</td>
        <td colspan="4">Қарор қабул қинган</td>
        <td colspan="4">Жўнатилганлар</td>
        <td colspan="4">Давлат рўйхатидан ўтказилганлар</td>
    </tr>
    <tr>
        <td colspan="2">Жами</td>
        <td colspan="2">шундан сувли</td>
        <td colspan="2">Жами</td>
        <td colspan="2">"шундан
            деҳқон хўжалиги учун"
        </td>
        <td colspan="2">Жами</td>
        <td colspan="2">"шундан
            деҳқон хўжалиги учун"
        </td>
        <td colspan="2">Жами</td>
        <td colspan="2">"шундан
            деҳқон хўжалиги учун"
        </td>
        <td colspan="2">Жами</td>
        <td colspan="2">"шундан
            деҳқон хўжалиги учун"
        </td>
        <td colspan="2">Жами</td>
        <td colspan="2">"шундан
            деҳқон хўжалиги учун"
        </td>
        <td colspan="2">Жами</td>
        <td colspan="2">"шундан
            деҳқон хўжалиги учун"
        </td>
        <td colspan="2">Жами</td>
        <td colspan="2">"шундан
            деҳқон хўжалиги учун"
        </td>
        <td colspan="2">Жами</td>
        <td colspan="2">"шундан
            деҳқон хўжалиги учун"
        </td>
        <td colspan="2">Жами</td>
        <td colspan="2">"шундан
            деҳқон хўжалиги учун"
        </td>
        <td colspan="2">Жами</td>
        <td colspan="2">"шундан
            деҳқон хўжалиги учун"
        </td>
        <td colspan="2">Жами</td>
        <td colspan="2">"шундан
            деҳқон хўжалиги учун"
        </td>
    </tr>
    <tr>
        <td>Сони</td>
        <td>Майдони (Га)</td>
        <td>Сони</td>
        <td>Майдони (Га)</td>
        <td>Лот сони</td>
        <td>Майдони (Га)</td>
        <td>Лот сони</td>
        <td>Майдони (Га)</td>
        <td>Лот сони</td>
        <td>Майдони (Га)</td>
        <td>Лот сони</td>
        <td>Майдони (Га)</td>
        <td>Лот сони</td>
        <td>Майдони (Га)</td>
        <td>Лот сони</td>
        <td>Майдони (Га)</td>
        <td>Лот сони</td>
        <td>Майдони (Га)</td>
        <td>Лот сони</td>
        <td>Майдони (Га)</td>
        <td>Лот сони</td>
        <td>Майдони (Га)</td>
        <td>Лот сони</td>
        <td>Майдони (Га)</td>
        <td>Лот сони</td>
        <td>Майдони (Га)</td>
        <td>Лот сони</td>
        <td>Майдони (Га)</td>
        <td>Лот сони</td>
        <td>Майдони (Га)</td>
        <td>Лот сони</td>
        <td>Майдони (Га)</td>
        <td>Лот сони</td>
        <td>Майдони (Га)</td>
        <td>Лот сони</td>
        <td>Майдони (Га)</td>
        <td>Лот сони</td>
        <td>Майдони (Га)</td>
        <td>Лот сони</td>
        <td>Майдони (Га)</td>
        <td>Лот сони</td>
        <td>Майдони (Га)</td>
        <td>Лот сони</td>
        <td>Майдони (Га)</td>
        <td>Лот сони</td>
        <td>Майдони (Га)</td>
        <td>Лот сони</td>
        <td>Майдони (Га)</td>
    </tr>
    <tr>
        <td></td>
        <td colspan="4">1</td>
        <td colspan="4">2</td>
        <td colspan="4">3</td>
        <td colspan="4">4</td>
        <td colspan="4">5</td>
        <td colspan="4">6</td>
        <td colspan="8">7</td>
        <td colspan="8">8</td>
        <td colspan="8">9</td>
    </tr>
    <tr>
        <td>Республика бўйича</td>
        <td>{{\App\Models\Land::whereNull('parent_id')->count()}}</td>
        <td>{{\App\Models\Land::whereNull('parent_id')->sum('area')}}</td>
        <td>{{\App\Models\Land::with('inventory')->whereNull('parent_id')->whereHas('inventory', function ($query) {
                $query->where('arable_areas_with_water','>',0);
                })->count()}}
        </td>
        <td>{{\App\Models\Land::with('inventory')->whereNull('parent_id')->whereHas('inventory', function ($query) {
                $query->where('arable_areas_with_water','>',0);
                })->sum('area')}}
        </td>
        <td>{{\App\Models\Land::whereNotNull('parent_id')->count()}}</td>
        <td>{{\App\Models\Land::whereNotNull('parent_id')->sum('area')}}</td>
        <td>{{\App\Models\Land::whereNotNull('parent_id')->where('person_type','J')->count()}}</td>
        <td>{{\App\Models\Land::whereNotNull('parent_id')->where('person_type','J')->sum('area')}}</td>
        <td>{{\App\Models\Land::with('review_organizations')->where('status_id',3)->whereHas('review_organizations', function ($query) {
                $query->whereIn('organization_id',[3,4]);
                })->count()}}
        </td>
        <td>{{\App\Models\Land::with('review_organizations')->where('status_id',3)->whereHas('review_organizations', function ($query) {
                $query->whereIn('organization_id',[3,4]);
                })->sum('area')}}
        </td>
        <td>{{\App\Models\Land::with('review_organizations')->where('status_id',3)->where('person_type','J')->whereHas('review_organizations', function ($query) {
                $query->whereIn('organization_id',[3,4]);
                })->count()}}
        </td>
        <td>{{\App\Models\Land::with('review_organizations')->where('status_id',3)->where('person_type','J')->whereHas('review_organizations', function ($query) {
                $query->whereIn('organization_id',[3,4]);
                })->sum('area')}}
        </td>
        <td>{{\App\Models\Land::with('review_organizations')->where('status_id',3)->whereHas('review_organizations', function ($query) {
                $query->where('organization_id',2);
                })->count()}}
        </td>
        <td>{{\App\Models\Land::with('review_organizations')->where('status_id',3)->whereHas('review_organizations', function ($query) {
                $query->where('organization_id',2);
                })->sum('area')}}
        </td>
        <td>{{\App\Models\Land::with('review_organizations')->where('status_id',3)->where('person_type','J')->whereHas('review_organizations', function ($query) {
                $query->where('organization_id',2);
                })->count()}}
        </td>
        <td>{{\App\Models\Land::with('review_organizations')->where('status_id',3)->where('person_type','J')->whereHas('review_organizations', function ($query) {
                $query->where('organization_id',2);
                })->sum('area')}}
        </td>
        <td>{{\App\Models\Land::with('review_organizations')->where('status_id',3)->whereHas('review_organizations', function ($query) {
                $query->where('organization_id',1);
                })->count()}}
        </td>
        <td>{{\App\Models\Land::with('review_organizations')->where('status_id',3)->whereHas('review_organizations', function ($query) {
                $query->where('organization_id',1);
                })->sum('area')}}
        </td>
        <td>{{\App\Models\Land::with('review_organizations')->where('status_id',3)->where('person_type','J')->whereHas('review_organizations', function ($query) {
                $query->where('organization_id',1);
                })->count()}}
        </td>
        <td>{{\App\Models\Land::with('review_organizations')->where('status_id',3)->where('person_type','J')->whereHas('review_organizations', function ($query) {
                $query->where('organization_id',1);
                })->sum('area')}}
        </td>
        <td>{{\App\Models\Land::whereNotNull('parent_id')->where('status_id',5)->count()}}</td>
        <td>{{\App\Models\Land::whereNotNull('parent_id')->where('status_id',5)->sum('area')}}</td>
        <td>{{\App\Models\Land::whereNotNull('parent_id')->where('status_id',5)->where('person_type','J')->count()}}</td>
        <td>{{\App\Models\Land::whereNotNull('parent_id')->where('status_id',5)->where('person_type','J')->sum('area')}}</td>
        <td>{{\App\Models\Land::whereNotNull('parent_id')->whereIn('status_id',[14,16,17])->count()}}</td>
        <td>{{\App\Models\Land::whereNotNull('parent_id')->whereIn('status_id',[14,16,17])->sum('area')}}</td>
        <td>{{\App\Models\Land::whereNotNull('parent_id')->whereIn('status_id',[14,16,17])->where('person_type','J')->count()}}</td>
        <td>{{\App\Models\Land::whereNotNull('parent_id')->whereIn('status_id',[14,16,17])->where('person_type','J')->sum('area')}}</td>
        <td>{{\App\Models\Land::whereNotNull('parent_id')->where('status_id',18)->count()}}</td>
        <td>{{\App\Models\Land::whereNotNull('parent_id')->where('status_id',18)->sum('area')}}</td>
        <td>{{\App\Models\Land::whereNotNull('parent_id')->where('status_id',18)->where('person_type','J')->count()}}</td>
        <td>{{\App\Models\Land::whereNotNull('parent_id')->where('status_id',18)->where('person_type','J')->sum('area')}}</td>
        <td>0</td>
        <td>0</td>
        <td>0</td>
        <td>0</td>
        <td>0</td>
        <td>0</td>
        <td>0</td>
        <td>0</td>
        <td>0</td>
        <td>0</td>
        <td>0</td>
        <td>0</td>
        <td>0</td>
        <td>0</td>
        <td>0</td>
        <td>0</td>
    </tr>
    @foreach($lands as $key=>$item)
        <tr>
            <td>----{{$item->nameuz}}</td>
            <td>{{$item->lands->whereNull('parent_id')->count()}}</td>
            <td>{{$item->lands->whereNull('parent_id')->sum('area')}}</td>
            <td>{{\App\Models\Land::where('region_id',$item->regionid)->with('inventory')->whereNull('parent_id')->whereHas('inventory', function ($query) {
                $query->where('arable_areas_with_water','>',0);
                })->count()}}
            </td>
            <td>{{\App\Models\Land::where('region_id',$item->regionid)->with('inventory')->whereNull('parent_id')->whereHas('inventory', function ($query) {
                $query->where('arable_areas_with_water','>',0);
                })->sum('area')}}
            </td>
            <td>{{$item->lands->whereNotNull('parent_id')->count()}}</td>
            <td>{{$item->lands->whereNotNull('parent_id')->sum('area')}}</td>
            <td>{{$item->lands->whereNotNull('parent_id')->where('person_type','J')->count()}}</td>
            <td>{{$item->lands->whereNotNull('parent_id')->where('person_type','J')->sum('area')}}</td>
            <td>{{\App\Models\Land::with('review_organizations')->where('region_id',$item->regionid)->where('status_id',3)->whereHas('review_organizations', function ($query) {
                $query->whereIn('organization_id',[3,4]);
                })->count()}}
            </td>
            <td>{{\App\Models\Land::with('review_organizations')->where('region_id',$item->regionid)->where('status_id',3)->whereHas('review_organizations', function ($query) {
                $query->whereIn('organization_id',[3,4]);
                })->sum('area')}}
            </td>
            <td>{{\App\Models\Land::with('review_organizations')->where('region_id',$item->regionid)->where('status_id',3)->where('person_type','J')->whereHas('review_organizations', function ($query) {
                $query->whereIn('organization_id',[3,4]);
                })->count()}}
            </td>
            <td>{{\App\Models\Land::with('review_organizations')->where('region_id',$item->regionid)->where('status_id',3)->where('person_type','J')->whereHas('review_organizations', function ($query) {
                $query->whereIn('organization_id',[3,4]);
                })->sum('area')}}
            </td>
            <td>{{\App\Models\Land::with('review_organizations')->where('region_id',$item->regionid)->where('status_id',3)->whereHas('review_organizations', function ($query) {
                $query->where('organization_id',2);
                })->count()}}
            </td>
            <td>{{\App\Models\Land::with('review_organizations')->where('region_id',$item->regionid)->where('status_id',3)->whereHas('review_organizations', function ($query) {
                $query->where('organization_id',2);
                })->sum('area')}}
            </td>
            <td>{{\App\Models\Land::with('review_organizations')->where('region_id',$item->regionid)->where('status_id',3)->where('person_type','J')->whereHas('review_organizations', function ($query) {
                $query->where('organization_id',2);
                })->count()}}
            </td>
            <td>{{\App\Models\Land::with('review_organizations')->where('region_id',$item->regionid)->where('status_id',3)->where('person_type','J')->whereHas('review_organizations', function ($query) {
                $query->where('organization_id',2);
                })->sum('area')}}
            </td>
            <td>{{\App\Models\Land::with('review_organizations')->where('region_id',$item->regionid)->where('status_id',3)->whereHas('review_organizations', function ($query) {
                $query->where('organization_id',1);
                })->count()}}
            </td>
            <td>{{\App\Models\Land::with('review_organizations')->where('region_id',$item->regionid)->where('status_id',3)->whereHas('review_organizations', function ($query) {
                $query->where('organization_id',1);
                })->sum('area')}}
            </td>
            <td>{{\App\Models\Land::with('review_organizations')->where('region_id',$item->regionid)->where('status_id',3)->where('person_type','J')->whereHas('review_organizations', function ($query) {
                $query->where('organization_id',1);
                })->count()}}
            </td>
            <td>{{\App\Models\Land::with('review_organizations')->where('region_id',$item->regionid)->where('status_id',3)->where('person_type','J')->whereHas('review_organizations', function ($query) {
                $query->where('organization_id',1);
                })->sum('area')}}
            </td>
            <td>{{$item->lands->where('status_id',5)->count()}}</td>
            <td>{{$item->lands->where('status_id',5)->sum('area')}}</td>
            <td>{{$item->lands->where('status_id',5)->where('person_type','J')->count()}}</td>
            <td>{{$item->lands->where('status_id',5)->where('person_type','J')->sum('area')}}</td>
            <td>{{$item->lands->whereIn('status_id',[14,16,17])->count()}}</td>
            <td>{{$item->lands->whereIn('status_id',[14,16,17])->sum('area')}}</td>
            <td>{{$item->lands->whereIn('status_id',[14,16,17])->where('person_type','J')->count()}}</td>
            <td>{{$item->lands->whereIn('status_id',[14,16,17])->where('person_type','J')->sum('area')}}</td>
            <td>{{$item->lands->where('status_id',18)->count()}}</td>
            <td>{{$item->lands->where('status_id',18)->sum('area')}}</td>
            <td>{{$item->lands->where('status_id',18)->where('person_type','J')->count()}}</td>
            <td>{{$item->lands->where('status_id',18)->where('person_type','J')->sum('area')}}</td>
            <td>0</td>
            <td>0</td>
            <td>0</td>
            <td>0</td>
            <td>0</td>
            <td>0</td>
            <td>0</td>
            <td>0</td>
            <td>0</td>
            <td>0</td>
            <td>0</td>
            <td>0</td>
            <td>0</td>
            <td>0</td>
            <td>0</td>
            <td>0</td>
        </tr>
        @foreach($item->Districts as $key=>$district)
            <tr>
                <td>--------{{$district->nameuz}}</td>
                <td>{{$district->lands->whereNull('parent_id')->count()}}</td>
                <td>{{$district->lands->whereNull('parent_id')->sum('area')}}</td>
                <td>{{\App\Models\Land::where('region_id',$district->areaid)->with('inventory')->whereNull('parent_id')->whereHas('inventory', function ($query) {
                $query->where('arable_areas_with_water','>',0);
                })->count()}}
                </td>
                <td>{{\App\Models\Land::where('region_id',$district->areaid)->with('inventory')->whereNull('parent_id')->whereHas('inventory', function ($query) {
                $query->where('arable_areas_with_water','>',0);
                })->sum('area')}}
                </td>
                <td>{{$district->lands->whereNotNull('parent_id')->count()}}</td>
                <td>{{$district->lands->whereNotNull('parent_id')->sum('area')}}</td>
                <td>{{$district->lands->whereNotNull('parent_id')->where('person_type','J')->count()}}</td>
                <td>{{$district->lands->whereNotNull('parent_id')->where('person_type','J')->sum('area')}}</td>
                <td>{{\App\Models\Land::with('review_organizations')->where('region_id',$district->areaid)->where('status_id',3)->whereHas('review_organizations', function ($query) {
                $query->whereIn('organization_id',[3,4]);
                })->count()}}
                </td>
                <td>{{\App\Models\Land::with('review_organizations')->where('region_id',$district->areaid)->where('status_id',3)->whereHas('review_organizations', function ($query) {
                $query->whereIn('organization_id',[3,4]);
                })->sum('area')}}
                </td>
                <td>{{\App\Models\Land::with('review_organizations')->where('region_id',$district->areaid)->where('status_id',3)->where('person_type','J')->whereHas('review_organizations', function ($query) {
                $query->whereIn('organization_id',[3,4]);
                })->count()}}
                </td>
                <td>{{\App\Models\Land::with('review_organizations')->where('region_id',$district->areaid)->where('status_id',3)->where('person_type','J')->whereHas('review_organizations', function ($query) {
                $query->whereIn('organization_id',[3,4]);
                })->sum('area')}}
                </td>
                <td>{{\App\Models\Land::with('review_organizations')->where('region_id',$district->areaid)->where('status_id',3)->whereHas('review_organizations', function ($query) {
                $query->where('organization_id',2);
                })->count()}}
                </td>
                <td>{{\App\Models\Land::with('review_organizations')->where('region_id',$district->areaid)->where('status_id',3)->whereHas('review_organizations', function ($query) {
                $query->where('organization_id',2);
                })->sum('area')}}
                </td>
                <td>{{\App\Models\Land::with('review_organizations')->where('region_id',$district->areaid)->where('status_id',3)->where('person_type','J')->whereHas('review_organizations', function ($query) {
                $query->where('organization_id',2);
                })->count()}}
                </td>
                <td>{{\App\Models\Land::with('review_organizations')->where('region_id',$district->areaid)->where('status_id',3)->where('person_type','J')->whereHas('review_organizations', function ($query) {
                $query->where('organization_id',2);
                })->sum('area')}}
                </td>
                <td>{{\App\Models\Land::with('review_organizations')->where('region_id',$district->areaid)->where('status_id',3)->whereHas('review_organizations', function ($query) {
                $query->where('organization_id',1);
                })->count()}}
                </td>
                <td>{{\App\Models\Land::with('review_organizations')->where('region_id',$district->areaid)->where('status_id',3)->whereHas('review_organizations', function ($query) {
                $query->where('organization_id',1);
                })->sum('area')}}
                </td>
                <td>{{\App\Models\Land::with('review_organizations')->where('region_id',$district->areaid)->where('status_id',3)->where('person_type','J')->whereHas('review_organizations', function ($query) {
                $query->where('organization_id',1);
                })->count()}}
                </td>
                <td>{{\App\Models\Land::with('review_organizations')->where('region_id',$district->areaid)->where('status_id',3)->where('person_type','J')->whereHas('review_organizations', function ($query) {
                $query->where('organization_id',1);
                })->sum('area')}}
                </td>
                <td>{{$district->lands->where('status_id',5)->count()}}</td>
                <td>{{$district->lands->where('status_id',5)->sum('area')}}</td>
                <td>{{$district->lands->where('status_id',5)->where('person_type','J')->count()}}</td>
                <td>{{$district->lands->where('status_id',5)->where('person_type','J')->sum('area')}}</td>
                <td>{{$district->lands->whereIn('status_id',[14,16,17])->count()}}</td>
                <td>{{$district->lands->whereIn('status_id',[14,16,17])->sum('area')}}</td>
                <td>{{$district->lands->whereIn('status_id',[14,16,17])->where('person_type','J')->count()}}</td>
                <td>{{$district->lands->whereIn('status_id',[14,16,17])->where('person_type','J')->sum('area')}}</td>
                <td>{{$district->lands->where('status_id',18)->count()}}</td>
                <td>{{$district->lands->where('status_id',18)->sum('area')}}</td>
                <td>{{$district->lands->where('status_id',18)->where('person_type','J')->count()}}</td>
                <td>{{$district->lands->where('status_id',18)->where('person_type','J')->sum('area')}}</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>

            </tr>
        @endforeach
    @endforeach
</table>
